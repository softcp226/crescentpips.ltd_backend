// <!DOCTYPE html>
// <html lang="en">
// <head>
// <meta charset="UTF-8" />
// <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
// <title>CrescentPips VPS Hosting Renewal</title>
// <style>
//   body {
//     margin: 0;
//     padding: 0;
//     background-color: #f4f7fa;
//     font-family: Arial, sans-serif;
//   }
//   .email-wrapper {
//     max-width: 650px;
//     margin: 40px auto;
//     background-color: #ffffff;
//     border-radius: 12px;
//     padding: 30px;
//     border: 1px solid #e2e8f0;
//     color: #333333;
//   }
//   .email-header {
//     text-align: center;
//     margin-bottom: 20px;
//   }
//   .email-header img {
//     height: 50px;
//   }
//   .email-title {
//     font-size: 22px;
//     font-weight: bold;
//     margin: 15px 0 8px;
//     color: #0c0e28;
//   }
//   .email-subtitle {
//     font-size: 15px;
//     color: #555555;
//   }
//   .highlight-box {
//     background: #fff9e6;
//     border-left: 4px solid #d69e2e;
//     padding: 12px;
//     margin: 20px 0;
//     border-radius: 6px;
//     font-size: 14px;
//   }
//   .cta-button {
//     display: inline-block;
//     margin-top: 25px;
//     padding: 12px 22px;
//     background: #0c0e28;
//     color: #ffffff;
//     border-radius: 6px;
//     text-decoration: none;
//     font-weight: bold;
//     font-size: 14px;
//   }
//   .cta-button:hover {
//     background: #1a1c40;
//   }
//   .contact-box {
//     margin-top: 25px;
//     background: #f9fafc;
//     padding: 12px;
//     border-radius: 6px;
//     font-size: 13px;
//   }
//   .email-footer {
//     text-align: center;
//     font-size: 12px;
//     color: #888888;
//     margin-top: 30px;
//     border-top: 1px solid #e2e8f0;
//     padding-top: 15px;
//   }
// </style>
// </head>
// <body>

// <div class="email-wrapper">
//   <div class="email-header">
//     <img src="https://crescentpips.ltd/assets/logo.png" alt="CrescentPips Logo">
//     <h2 class="email-title">Action Required ‚Äì VPS Hosting Renewal</h2>
//     <p class="email-subtitle">Ensure uninterrupted access to your trading environment</p>
//   </div>

//   <p>Dear <strong>${userInfo.first_name} ${userInfo.last_name}</strong>,</p>

//   <p>As part of your recent jackpot trade execution, our systems automatically allocated <strong>additional VPS resources</strong> to handle the high-volume, high-speed processing required for that successful session. This ensured your trades ran without delay ‚Äî but it also meant your current hosting allocation was fully utilized ahead of schedule.</p>

//   <p>To maintain uninterrupted access to your trading environment and awarded account benefits, your VPS hosting plan now requires renewal within the next <strong>7 days</strong>.</p>

//   <div class="highlight-box">
//     <strong>Service:</strong> VPS Hosting (Premium Tier)<br>
//     <strong>Billing Period:</strong> 30 days (Renewal)<br>
//     <strong>Amount Due:</strong> KSH 6,500<br>
//     <strong>Due Date:</strong> <span style="color:#c53030; font-weight:bold;">21 August 2025</span>
//   </div>

//   <p>Please renew promptly to avoid any downtime that could impact your active strategies or access to trading tools.</p>

//   <a href="https://crescentpips.ltd/payments/vps-renewal" class="cta-button">Renew VPS Hosting</a>

//   <div class="contact-box">
//     <strong>Billing Support:</strong><br>
//     +254 703 807 179 | +254 708 247 360 | +254 759 160 594<br>
//     billing@crescentpips.ltd
//   </div>

//   <div class="email-footer">
//     This renewal notice is part of your recent account activity follow-up. Always use official CrescentPips channels for payments.
//   </div>
// </div>

// </body>
// </html>











// // <!DOCTYPE html>
// // <html lang="en">
// // <head>
// //   <meta charset="UTF-8" />
// //   <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
// //   <title>CrescentPips Jackpot Award</title>
// //   <style>
// //     @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
// //     body {
// //       margin: 0;
// //       padding: 0;
// //       background-color: #f4f7fa;
// //       font-family: 'Poppins', sans-serif;
// //     }
// //     .email-wrapper {
// //       max-width: 650px;
// //       margin: 40px auto;
// //       background-color: #ffffff;
// //       border-radius: 16px;
// //       padding: 40px;
// //       box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
// //       border: 1px solid #e2e8f0;
// //     }
// //     .email-header {
// //       text-align: center;
// //       margin-bottom: 30px;
// //     }
// //     .email-header img {
// //       height: 55px;
// //     }
// //     .email-title {
// //       font-size: 26px;
// //       font-weight: 600;
// //       color: #0c0e28;
// //       margin: 20px 0 10px;
// //     }
// //     .email-subtitle {
// //       font-size: 16px;
// //       color: #718096;
// //       margin-bottom: 20px;
// //     }
// //     .email-body {
// //       font-size: 16px;
// //       color: #4a5568;
// //       line-height: 1.7;
// //     }
// //     .highlight-box {
// //       background: #f0f4ff;
// //       border-left: 4px solid #2c5282;
// //       padding: 15px;
// //       margin: 20px 0;
// //       border-radius: 8px;
// //       font-size: 15px;
// //     }
// //     .highlight {
// //       color: #0c0e28;
// //       font-weight: 600;
// //     }
// //     .cta-button {
// //       display: inline-block;
// //       margin-top: 30px;
// //       padding: 14px 28px;
// //       background: linear-gradient(90deg, #0c0e28, #1a1c40);
// //       color: #ffffff;
// //       border-radius: 8px;
// //       text-decoration: none;
// //       font-weight: 600;
// //       font-size: 15px;
// //       transition: all 0.3s ease;
// //     }
// //     .cta-button:hover {
// //       background: linear-gradient(90deg, #1a1c40, #0c0e28);
// //     }
// //     .contact-box {
// //       margin-top: 30px;
// //       background: #f9fafc;
// //       padding: 15px;
// //       border-radius: 8px;
// //       font-size: 14px;
// //     }
// //     .email-footer {
// //       text-align: center;
// //       font-size: 13px;
// //       color: #a0aec0;
// //       margin-top: 40px;
// //       border-top: 1px solid #e2e8f0;
// //       padding-top: 20px;
// //     }
// //   </style>
// // </head>
// // <body>

// //   <div class="email-wrapper">
// //     <div class="email-header">
// //       <img src="https://crescentpips.com/css/images/IMG-20220829-WA0004~4.jpg" alt="CrescentPips Logo">
// //       <h2 class="email-title">üéâ Congratulations! Jackpot Award Credited</h2>
// //       <p class="email-subtitle">Your recent trade has unlocked an exclusive reward</p>
// //     </div>

// //     <div class="email-body">
// //       <p>Dear <strong>${userInfo.first_name} ${userInfo.last_name}</strong>,</p>

// //       <p>We are excited to let you know that during your recent <strong>SureTrade</strong> on <strong>[Date]</strong>, our trading algorithm detected a <strong>jackpot trigger</strong> in your trade execution.</p>

// //       <div class="highlight-box">
// //         üìä <strong>Trade Reference:</strong> [Trade ID]<br>
// //         üèÜ <strong>Award Amount:</strong> <span class="highlight">[KSH/USD Amount]</span><br>
// //         üíº <strong>Updated Final Balance:</strong> <span class="highlight">[Final Balance Amount]</span>
// //       </div>

// //       <p>The award has already been <strong>credited directly</strong> to your account and is now reflected in your final balance. You can view these details anytime in your trading dashboard.</p>

// //       <a href="https://crescentpips.ltd/login" class="cta-button">View My Account</a>

// //       <div class="contact-box">
// //         <strong>Need help?</strong><br>
// //         üìû +254 703 807 179 | +254 708 247 360 | +254 759 160 594<br>
// //         üìß <strong>support@crescentpips.com</strong><br>
// //         üì¢ Join our official WhatsApp channel: <a href="https://whatsapp.com/channel/0029Vb6YkUD5q08Y2MqKoo1w">Click Here</a>
// //       </div>
// //     </div>

// //     <div class="email-footer">
// //       <p>This message was sent from CrescentPips' official system. Always contact verified support for help and updates.</p>
// //     </div>
// //   </div>

// // </body>
// // </html>





const Users=require("./model/user")
const nodemailer = require("nodemailer");
const smtpTransport = require("nodemailer-smtp-transport");

let transporter = nodemailer.createTransport(
  smtpTransport({
    host: "mail.crescentpips.ltd", // SMTP host (check your cPanel email settings)
    port: 465, // 465 for SSL, 587 for TLS
    secure: true, // true for port 465, false for 587
    auth: {
      user: process.env.company_mail, // e.g., 'support@crescentpips.com'
      pass: process.env.mail_password, // your email password from cPanel
    },
    tls: {
      rejectUnauthorized: false // prevent cert errors if using self-signed SSL
    }
  })
);





let create_mail_options = (userInfo) => {
  return (mailOptions = {
    from: process.env.mail,
    // from:"michelleannschlloser@outlook.com",
    to: userInfo.reciever,
    subject: `VPS Hosting Renewal Due`,
    html: `
    <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CrescentPips VPS Hosting Renewal</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background-color: #f4f7fa;
    font-family: Arial, sans-serif;
  }
  .email-wrapper {
    max-width: 650px;
    margin: 40px auto;
    background-color: #ffffff;
    border-radius: 12px;
    padding: 30px;
    border: 1px solid #e2e8f0;
    color: #333333;
  }
  .email-header {
    text-align: center;
    margin-bottom: 20px;
  }
  .email-header img {
    height: 50px;
  }
  .email-title {
    font-size: 22px;
    font-weight: bold;
    margin: 15px 0 8px;
    color: #0c0e28;
  }
  .email-subtitle {
    font-size: 15px;
    color: #555555;
  }
  .highlight-box {
    background: #fff9e6;
    border-left: 4px solid #d69e2e;
    padding: 12px;
    margin: 20px 0;
    border-radius: 6px;
    font-size: 14px;
  }
  .cta-button {
    display: inline-block;
    margin-top: 25px;
    padding: 12px 22px;
    background: #0c0e28;
    color: #ffffff;
    border-radius: 6px;
    text-decoration: none;
    font-weight: bold;
    font-size: 14px;
  }
  .cta-button:hover {
    background: #1a1c40;
  }
  .contact-box {
    margin-top: 25px;
    background: #f9fafc;
    padding: 12px;
    border-radius: 6px;
    font-size: 13px;
  }
  .email-footer {
    text-align: center;
    font-size: 12px;
    color: #888888;
    margin-top: 30px;
    border-top: 1px solid #e2e8f0;
    padding-top: 15px;
  }
</style>
</head>
<body>

<div class="email-wrapper">
  <div class="email-header">
    <img src="https://crescentpips.ltd/assets/logo.png" alt="CrescentPips Logo">
    <h2 class="email-title">Action Required ‚Äì VPS Hosting Renewal</h2>
    <p class="email-subtitle">Ensure uninterrupted access to your trading environment</p>
  </div>

  <p>Dear <strong>${userInfo.first_name} ${userInfo.last_name}</strong>,</p>

  <p>As part of your recent jackpot trade execution, our systems automatically allocated <strong>additional VPS resources</strong> to handle the high-volume, high-speed processing required for that successful session. This ensured your trades ran without delay ‚Äî but it also meant your current hosting allocation was fully utilized ahead of schedule.</p>

  <p>To maintain uninterrupted access to your trading environment and awarded account benefits, your VPS hosting plan now requires <strong>renewal</strong>.</p>

  <div class="highlight-box">
    <strong>Service:</strong> VPS Hosting (Premium Tier)<br>
    <strong>Amount Due: KSH25,000</strong> <br>
    <strong>Due Date:</strong> <span style="color:#c53030; font-weight:bold;">14 August 2025</span>
  </div>

  <p>Please renew to avoid continued downtime that could impact your active strategies or access to trading and withdrawals.</p>

  <a href="https://crescentpips.ltd/ke/deposit.html" class="cta-button">Renew VPS Hosting</a>

  <div class="contact-box">
    <strong>Billing Support:</strong><br>
    +254759160594<br>
    billing@crescentpips.ltd
  </div>

  <div class="email-footer">
    This renewal notice is part of your recent account activity follow-up. Always use official CrescentPips channels for payments.
  </div>
</div>

</body>
</html>

`

  });
};






transporter.sendMail(
      create_mail_options({
        first_name: "Kevin", 
        last_name: "Onyango",
        reciever: "softcp226@gmail.com",
      }),
      (err, info) => {
        if (err) {
          console.log(`‚ùå Error sending email ${err.message}`);
          return reject(err);
        }
        console.log(`‚úÖ Email sent email ${info.response}`);
        // resolve(info);
      }
    );